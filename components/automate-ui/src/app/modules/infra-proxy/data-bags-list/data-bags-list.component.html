<section class="databags">
  <chef-loading-spinner *ngIf="dataBagsListLoading" size="50"></chef-loading-spinner>
  <app-create-data-bag-modal 
    [openEvent]="openDataBagModal"
    [server_Id]="serverId"
    [org_Id]="orgId">
  </app-create-data-bag-modal>
  <app-empty-state *ngIf="authFailure" moduleTitle="data bags" (resetKeyRedirection)="resetKeyTabRedirection($event)"></app-empty-state>
  <ng-container  *ngIf="!dataBagsListLoading && !authFailure">
    <chef-toolbar>
      <app-authorized [allOf]="['/api/v0/infra/servers', 'post']">
        <chef-button primary (click)="openCreateModal()">Create Databag</chef-button>
      </app-authorized>
    </chef-toolbar>
    <div class="head-container">
      <chef-tr class="no_border_tr">
        <chef-th class="no_border_th">Name</chef-th>
      </chef-tr>
    </div>
    <chef-table>
      <chef-thead>
      </chef-thead>
      <chef-tbody>
        <chef-tr *ngFor="let dataBag of dataBags">
          <chef-td><a [routerLink]="['/infrastructure','chef-servers', serverId, 'organizations', orgId, 'data-bags', dataBag.name]">{{ dataBag.name }}</a></chef-td>
        </chef-tr>
      </chef-tbody>
    </chef-table>
  </ng-container>
</section>
